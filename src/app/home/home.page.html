<!-- INTERFAZ PARA MOVILES CELULARES Y TABLETS (Escritorio y Android TV mas abajo) -->

<ion-content *ngIf="isMobile">

  <ion-menu contentId="main-content">
    <ion-header>
      <ion-toolbar color="dark">
        <ion-title>Ayuda e Instrucciones</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding" color="light" style="font-size: 16px;">

      <ion-item color="light" lines="none" class="ion-text-left">
        <ion-title>Estado de los canales</ion-title>
      </ion-item>

      <ion-item color="light" lines="none">
        <ion-grid>
          <ion-row>
            <ion-col size="auto">
              <ion-icon style="font-size: 21px; margin-right: 10px; color: rgb(25, 212, 0)"
                name="checkmark-outline"></ion-icon>
            </ion-col>
            <ion-col>
              Canal disponible.
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item>

      <ion-item color="light" lines="none">
        <ion-grid>
          <ion-row>
            <ion-col size="auto">
              <ion-icon style="font-size: 21px; margin-right: 10px; color: #ff0230" name="close-outline"></ion-icon>
            </ion-col>
            <ion-col>
              Canal no disponible.
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item>

      <ion-item color="light" lines="none">
        <ion-title>Funciones</ion-title>
      </ion-item>

      <ion-item color="light" lines="none">
        <ion-grid>
          <ion-row>
            <ion-col size="auto">
              <ion-icon name="calendar-outline" style="font-size: 21px; color: #fff; margin-right: 10px;"></ion-icon>
            </ion-col>
            <ion-col>
              Ver la programacion del canal.
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item>

      <ion-item color="light" lines="none">
        <ion-grid>
          <ion-row>
            <ion-col size="auto">
              <ion-icon name="globe-outline" style="font-size: 27px; color: #fff;"></ion-icon>
            </ion-col>
            <ion-col>
              Abrir la página web del canal.
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item>

      <ion-item color="light" lines="none">
        <ion-grid>
          <ion-row>
            <ion-col size="auto">
              <i class="fa-solid fa-rotate-right" style="margin-right: 10px; font-size: 21px;"></i>
            </ion-col>
            <ion-col>
              Actualizar canales (sirve en el caso de que no se vean algunos canales).
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item>

      <ion-item color="light" lines="none">
        <ion-grid>
          <ion-row>
            <ion-col size="auto">
              <i class="fa-brands fa-chromecast" style="font-size: 21px; margin-right: 10px;"></i>
            </ion-col>
            <ion-col>
              Abrir instrucciones para Chromecast.
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item>

      <ion-item color="light" lines="none">
        <ion-title>Como acceder a un canal</ion-title>
      </ion-item>

      <ion-item color="light" lines="none">
        <ion-grid>
          <ion-row>
            <ion-col size="1">

            </ion-col>
            <ion-col>
              Ingresa facilmente presionando un canal de la lista.
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item>

      <ion-item color="light" lines="none">
        <ion-img src="assets/instrucciones/lista.png"></ion-img>
      </ion-item>

      <ion-item color="light" lines="none">
        <ion-grid>
          <ion-row>
            <ion-col size="1">

            </ion-col>
            <ion-col>
              Tambien puedes filtrar los canales por categoria (Nacionales, Entretencion, Tarapaca, Magallanes, etc.).
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item>

      <ion-item color="light" lines="none">
        <ion-img src="assets/instrucciones/filtro1.png"></ion-img>
      </ion-item>

      <ion-item color="light" lines="none">
        <ion-grid>
          <ion-row>
            <ion-col size="1">

            </ion-col>
            <ion-col>
              En algunos canales, puedes ver la programacion presionando el boton <ion-icon name="calendar-outline"
                style="font-size: 21px; color: #fff; vertical-align: bottom;"></ion-icon>.
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item>

      <ion-item color="light" lines="lines">
        <ion-img src="assets/instrucciones/parrilla1.png"></ion-img>
      </ion-item>
      <br>

      <ion-text style="font-style: italic; font-size: 15px;" (click)="bounceBaloon()">*En caso de experimentar problemas
        al reproducir algún canal, revisa tu conexion. En caso contrario el problema podria ser causado desde el mismo
        canal.</ion-text>

    </ion-content>
  </ion-menu>

  <div class="ion-page" id="main-content">
    <ion-header>
      <ion-toolbar color="dark">
        <ion-buttons slot="start">
          <ion-menu-button><ion-icon name="help-circle-outline" style="font-size: 27px;"></ion-icon></ion-menu-button>
        </ion-buttons>
        <ion-title class="ion-text-center" size="large" style="padding: 0;">
          <ion-grid style="padding: 0;">
            <ion-row>
              <ion-col class="ion-text-center">Fly TV<img src="assets/icon/logo-icon.png"
                  style="width: 22px;margin-right: 10px;"></ion-col>
              <ion-col class="ion-text-right" size="auto">
                <i class="fa-brands fa-chromecast" style="font-size: 22px; margin-right: 10px;" id="click-trigger"></i>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-title>

      </ion-toolbar>
      <ion-item color="dark" (click)="openShareAppModal(true)">
        <ion-icon name="share-social-outline" style="font-size: 27px; margin-right: 10px;"></ion-icon>
        <ion-text>Comparte la apicacion presionando aqui!</ion-text>
      </ion-item>

      <ion-list color="light" class="ion-text-capitalize">
        <ion-item color="light">
          <ion-grid style="padding: 0;">
            <ion-row style="padding: 0;">
              <ion-col size="11" style="padding: 0;">
                <ion-select class="ion-text-capitalize" color="light" style="width: 80%; padding: 0;" aria-label="Fruit"
                  interface="popover" placeholder="Selecciona una categoria" [innerHTML]="htmlSelectOption"
                  (ionChange)="handleChange($event)">
                </ion-select>
              </ion-col>
              <ion-col class="ion-text-right" class="vertical-center" style="font-size: 21px; padding: 0;" size="1"
                (click)="updateChannels()">
                <i class="fa-solid fa-rotate-right"></i>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
      </ion-list>


      <ion-list>
        <ion-item *ngIf="enableChannelPreview" color="tertiary" style="margin: 0; padding: 0;" lines="none">

          <video id="videoPreview" poster="../../assets/fondotv.png" autoplay>
          </video>

          <ion-text *ngIf="!previewAutorized" style="margin-left: 5px;" class="ion-text-center">Selecciona un canal de
            la lista</ion-text>

          <ion-label style="font-size: 15px;vertical-align: middle; margin-left: 10px;">

            <ion-label *ngIf="previewAutorized" style="text-align: center;" class="ion-text-left"><ion-progress-bar
                color="danger" [value]="intervalChannelDuration"></ion-progress-bar></ion-label>

            <ion-label style="margin-top: 15px; font-size: 15px;" *ngIf="previewAutorized">
              <ion-label style="margin:0px; padding: 0px;" class="ion-text-left">
                <img class="channel-logo" style="vertical-align: middle;"
                  [src]="ranChannel.logo">{{ranChannel.name}}</ion-label>
            </ion-label>



            <ion-label *ngIf="previewAutorized" >
              <ion-button *ngIf="previewAutorized" style="margin-top: 5px;width: 100%; margin-left: 0px;" color="medium" expand="full"
                [attr.id]="ranChannel.id" [routerLink]="['/reproductor']" [queryParams]="{id: ranChannel.id ,
                     current: ranChannel.transmitiendo.current ? ranChannel.transmitiendo.current: '',
                      next: ranChannel.transmitiendo.next ? ranChannel.transmitiendo.next : ''}"
                (click)="stopPreviewChannel()">Continuar Viendo</ion-button>
            </ion-label>

            <ion-label style="font-size: 15px;">O selecciona otro</ion-label>

          </ion-label>
        </ion-item>



        <!-- <ion-item *ngIf="!previewAutorized" color="dark" style="margin: 0; padding: 0;" color="tertiary" lines="none">
          <ion-label style="font-size: 15px;vertical-align: top;" class="ion-text-center">

            <ion-button color="medium" (click)="autorizePreview()" style="font-size: 14px; font-weight: 600;">Activar Vista Previa</ion-button>

          </ion-label>
        </ion-item> -->

      </ion-list>


    </ion-header>

    <ion-content>

      <ion-list *ngFor="let channel of channels">
        <ion-item color="dark" *ngIf="channel.enabled && channel.url.includes('https')">

          <ion-icon [ngStyle]="{'color': channel.estado ? 'rgb(25, 212, 0)' : '#ff0230'}"
            [attr.name]="channel.estado ? 'checkmark-outline' : 'close-outline'"
            style="font-size: 21px; margin-right: 10px;"></ion-icon>

          <img class="channel-logo" [src]="channel.logo">

          <ion-label *ngIf="channel.iframe" [attr.id]="channel.id"
            [routerLink]="['/iframe']"
            [queryParams]="{id: channel.id, current: channel.transmitiendo.current ? channel.transmitiendo.current : '', next: channel.transmitiendo.next ? channel.transmitiendo.next : ''}"
            style="font-size: 15px; font-weight: bold; color: #e9e9e9;">{{channel.name}}
          </ion-label>

          <ion-label *ngIf="!channel.iframe" [attr.id]="channel.id"
            style="font-size: 15px; font-weight: bold; color: #e9e9e9;"
            (click)="getPreviewChannel(channel.id)">{{channel.name}}

            <ion-label style="font-size: 12px; font-weight: 400; color: #fff;"
              *ngIf="channel.transmitiendo.current !== ''"><ion-icon name="chevron-forward-outline"
                style="color: #fff;"></ion-icon>{{channel.transmitiendo.current}}</ion-label>
            <ion-label style="font-size: 12px; font-weight: 400; color: #fff;"
              *ngIf="channel.transmitiendo.next !== ''">{{channel.transmitiendo.next}}</ion-label>

          </ion-label>

          <ion-icon *ngIf="channel.parrilla.length" name="calendar-outline"
            style="font-size: 22px; color: #fff; vertical-align: bottom;margin-right: 0px;margin-left: 5px;padding: 0px;"
            (click)="setOpen(true, channel)"></ion-icon>
          <ion-icon *ngIf="!channel.parrilla.length" name="calendar-outline"
            style="font-size: 22px; color: #000; vertical-align: bottom;margin-right: 0px;margin-left: 5px;padding: 0px;"></ion-icon>
          <ion-icon name="globe-outline"
            style="font-size: 22px;margin-left: 10px;margin-right: 0px;padding: 0px; vertical-align: bottom; color: #fff"
            *ngIf="channel.website !== ''" (click)="openWebSite(channel.website)"></ion-icon>
          <ion-icon name="globe-outline"
            style="font-size: 22px;margin-left: 10px;margin-right: 0px;padding: 0px; vertical-align: bottom; color: #000"
            *ngIf="channel.website === ''"></ion-icon>

          <!-- <ion-icon name="share-outline"
            style="font-size: 22px;margin-left: 10px;margin-right: 0px;padding: 0px; vertical-align: bottom; color: #fff"
            *ngIf="!channel.iframe" (click)="openChannelUrl(channel.url, channel.id)"></ion-icon> -->

          <!-- <ion-icon name="share-outline"
            style="font-size: 22px;margin-left: 10px;margin-right: 0px;padding: 0px; vertical-align: bottom; color: #000"
            *ngIf="channel.iframe"></ion-icon> -->

        </ion-item>

        <ion-item color="dark" *ngIf="channel.enabled && channel.url.includes('http:')" >

          <ion-icon [ngStyle]="{'color': channel.estado ? 'rgb(25, 212, 0)' : '#ff0230'}"
            [attr.name]="channel.estado ? 'checkmark-outline' : 'close-outline'"
            style="font-size: 21px; margin-right: 10px;"></ion-icon>

          <img class="channel-logo" [src]="channel.logo"><ion-label [attr.id]="channel.id"
            style="font-size: 15px; font-weight: bold;" (click)="stopPreviewChannel(); openChannelUrl(channel.url, channel.string)">{{channel.name}}

            <ion-label style="font-size: 12px; font-weight: 400;" *ngIf="channel.transmitiendo.current !== ''"><ion-icon
                name="chevron-forward-outline"
                style="color: #fff;"></ion-icon>{{channel.transmitiendo.current}}</ion-label>
            <ion-label style="font-size: 12px; font-weight: 400;"
              *ngIf="channel.transmitiendo.next !== ''">{{channel.transmitiendo.next}}</ion-label>

          </ion-label>

          <ion-icon *ngIf="channel.parrilla.length" name="calendar-outline"
            style="font-size: 22px; color: #fff; vertical-align: bottom;margin-right: 0px;margin-left: 5px;padding: 0px;"
            (click)="setOpen(true, channel)"></ion-icon>

          <ion-icon *ngIf="!channel.parrilla.length" name="calendar-outline"
            style="font-size: 22px; color: #000; vertical-align: bottom;margin-right: 0px;margin-left: 5px;padding: 0px;"></ion-icon>

          <ion-icon name="globe-outline"
            style="font-size: 22px;margin-left: 10px;margin-right: 0px;padding: 0px; vertical-align: bottom; color: #fff"
            *ngIf="channel.website !== ''" (click)="openWebSite(channel.website)"></ion-icon>

          <ion-icon name="globe-outline"
            style="font-size: 22px;margin-left: 10px;margin-right: 0px;padding: 0px; vertical-align: bottom; color: #000"
            *ngIf="channel.website === ''"></ion-icon>

          <!-- <ion-icon name="share-outline"
            style="font-size: 22px;margin-left: 10px;margin-right: 0px;padding: 0px; vertical-align: bottom; color: #000"
            *ngIf="true"></ion-icon> -->

        </ion-item>

      </ion-list>


      <!-- INSTRUCCIONES CHROMECAST -->
      <ion-popover trigger="click-trigger" triggerAction="click">
        <ng-template>
          <ion-content class="ion-padding">

            <h4>Conectar a Chromecast</h4>

            <p>En el reproductor, selecciona el icono de compartir. <ion-icon name="share-outline"
                style="color: #fff; font-size: 22px; vertical-align: bottom;"></ion-icon>
            </p>

            <p>Si tienes el reproductor VLC, este se abrira automaticamente.</p>

            <p>Si tienes otro reproductor y no tienes instalado VLC, se abrirá la opcion de compartir con aplicacion de
              video.</p>

            <a href="https://play.google.com/store/apps/details?id=org.videolan.vlc" target="_blank"
              class="ion-text-center" style="color: #fff;">
              <p>VLC for Android</p>
              <div>
                <img style="width: 35px; border-radius: 10px; margin-right: 5px;"
                  src="https://play-lh.googleusercontent.com/nPnJc260PPoupBe-DcVQ-MNr6149dphdEoEAN-C9xwgctpVXbwsuyon_jEZ3uPWWYQ=w240-h480-rw">
                <img style="height: 35px;" src="https://www.videolan.org/images/get_it_on_play_logo_large.png">
              </div>

            </a>

            <p>VLC media player es un proyecto de código abierto, por lo cual su aplicacion no contiene publicidad y es
              100% gratuita.</p>

            <p><ion-icon name="logo-chrome"
                style="font-size: 21px; margin-right: 5px; vertical-align: bottom;"></ion-icon>Otra alternativa es
              compartir el canal a Google Chrome, el cual también es compatible con Chromecast.</p>

            <p>También puedes probar con otros navegadores.</p>

          </ion-content>

        </ng-template>

      </ion-popover>

    </ion-content>

  </div>

</ion-content>

<!-- INICIO MODALES -->

<!-- MODAL PROGRAMACION -->
<ion-modal [isOpen]="isModalOpen" (willDismiss)="setOpen(false)">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title><img [src]="channelModal.logo"
            style="width: 30px; vertical-align: middle; margin-right: 10px;">Programacion
          {{channelModal.name}}</ion-title>
        <ion-buttons slot="end">
          <ion-button *ngIf="isMobile" (click)="setOpen(false,channel)">Cerrar</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <h4 class="ion-text-center">{{channelModal.dia}} {{channelModal.numeroDia}} de {{channelModal.mes}} del
        {{channelModal.year}}</h4>

      <ion-list *ngFor="let p of modalParrilla">
        <ion-item color="medium" lines="none" *ngIf="p.horaNormal + ' '+p.programa === modalParrilla.current.current"
          (click)="emptyFunction()">
          <ion-grid (click)="emptyFunction()">
            <ion-row (click)="emptyFunction()">
              <ion-col (click)="emptyFunction()" [routerLink]="">{{p.horaNormal}}</ion-col>
              <ion-col>{{p.programa}}</ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>

        <ion-item *ngIf="p.horaNormal + ' '+p.programa !== modalParrilla.current.current" (click)="emptyFunction()">
          <ion-grid (click)="emptyFunction()">
            <ion-row (click)="emptyFunction()">
              <ion-col (click)="emptyFunction()" [routerLink]="">{{p.horaNormal}}</ion-col>
              <ion-col>{{p.programa}}</ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>

      </ion-list>
    </ion-content>
  </ng-template>
</ion-modal>

<!-- MODAL PARA COMPARTIR LA APP (QR, WSP, INSTA, FB, ETC) -->

<ion-modal [isOpen]="isModalShareAppOpen" (willDismiss)="openShareAppModal(false)">
  <ng-template>

    <ion-header>
      <ion-toolbar color="light">
        <ion-title class="ion-text-center">Compartenos</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="openShareAppModal(false)">Cerrar</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>

    <ion-content class="ion-padding" color="middle" class="ion-text-center">

      <ion-card color="dark">

        <ion-card-content>
          <h2>Puedes compartir la app con el siguente codigo QR. Este llevará a tu conocida o conocido directamente a
            Google Play para descargar la aplicacion.</h2>
          <br>
          <ion-img src="../../assets/qrapp.png" style="width: 60%;margin: auto;"></ion-img>
          <br>
          <h2>O también puedes compartirla directamente en tus redes presionando en compartir.</h2>
          <br>
          <ion-text style="font-size: 21px;" color="success" (click)="openShareApp()"><ion-icon
              name="share-social-outline"
              style="font-size: 25px;margin-right: 10px; vertical-align: bottom;"></ion-icon>Compartir</ion-text>

          <br>
        </ion-card-content>
      </ion-card>


    </ion-content>
  </ng-template>
</ion-modal>
<!-- FIN MODALES -->